!function(){try{var n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[t]="5daff486-09f9-41aa-a873-3b7b18bae4a2",n._sentryDebugIdIdentifier="sentry-dbid-5daff486-09f9-41aa-a873-3b7b18bae4a2")}catch(n){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[89382],{95192:function(n,t,e){e.d(t,{BL:function(){return j},Gz:function(){return b},P4:function(){return O},Rm:function(){return m},Sj:function(){return S},Wo:function(){return w},sh:function(){return k},uQ:function(){return P},xo:function(){return h},zK:function(){return E}});var r,i=e(94713),o=e(5338),a=e(6939),c=e(30073),u=e.n(c),l=e(91341),s=e(10086),f=e(71351),p=e(54184),v=e(69566),d=e(23194);function g(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),e.push.apply(e,r)}return e}function y(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?g(Object(e),!0).forEach(function(t){(0,i.Z)(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):g(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}var b=(0,s.xk)(function(n){return"/api/v2/me/collections/medium/".concat(n.id)},(0,s.Nv)()),h=(0,s.H$)(function(n){var t=n.collection,e=n.medium;return["POST","/api/v2/collections/".concat((0,p.j)(t),"/photos").concat(e&&"?photo_id=".concat((0,p.j)(e))),null]},(0,s.Nv)(),{onSuccess:function(n){var t=n.collection,e=n.medium;(0,l.Z)({name:"collection",action:"add",id:(0,p.j)(t)}),(0,f.t)(d.Mk),(0,f.P)(b,{matcher:e,mutator:function(n){return{data:[].concat((0,a.Z)(n.data),[(0,p.j)(t)])}}})}}),m=(0,s.H$)(function(n){return["PATCH","/api/v2/collections/".concat((0,p.j)(n)),n.attributes]},(0,s.Nv)(),{onSuccess:function(n){(0,l.Z)({name:"collection",action:"update",id:(0,p.j)(n)}),(0,f.t)(d.Mk)}}),O=(0,s.H$)(function(n){return["DELETE","/api/v2/collections/".concat(n),null]},(0,s.Nv)(),{onSuccess:function(n){(0,l.Z)({name:"collection",action:"delete",id:n}),(0,f.t)(d.Mk),(0,f.P)(b,{mutator:function(t){return{data:t.data.filter(function(t){return t!==n})}}})}}),P=(0,s.H$)(function(n){var t=n.collection,e=n.medium;return["DELETE","/api/v2/collections/".concat((0,p.j)(t),"/photos").concat(e?"?photo_id=".concat((0,p.j)(e)):"/"),null]},(0,s.Nv)(),{onSuccess:function(n){var t=n.collection,e=n.medium;(0,l.Z)({name:"collection",action:"remove",id:(0,p.j)(t)}),(0,f.t)(d.Mk),(0,f.P)(b,{matcher:e,mutator:function(n){return{data:n.data.filter(function(n){return n!==(0,p.j)(t)})}}})}}),j=(0,s.H$)(function(n){return["POST","/api/v2/collections?title=".concat(n),null]},(0,s.Nv)(),{onSuccess:(r=(0,o.Z)(u().mark(function n(t,e){var r;return u().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=e.data,(0,l.Z)({name:"collection",action:"create",id:r.id});case 2:case"end":return n.stop()}},n)})),function(n,t){return r.apply(this,arguments)})}),w=(0,s.xk)(function(n){return"/api/v2/collections/".concat(n)},(0,s.Nv)()),k=(0,s.EP)()(function(n,t){var e=t.page;return"/api/v2/collections?".concat((0,v.Pz)({per_page:12,page:e}))}),S=(0,s.xk)(function(n){return"/api/v3/collections/".concat(n,"/tags")},(0,s.Nv)());(0,s.xk)(function(){return"/api/v3/collections/popular"},(0,s.Nv)()),(0,s.xk)(function(n){return"/api/v3/search/collection?".concat((0,v.Pz)(n))},(0,s.Nv)()),(0,s.EP)()(function(n,t){var e=t.page;return"/api/v3/collections/suggestions?".concat((0,v.Pz)(y(y({},n),{},{page:e})))});var E=(0,s.EP)()(function(n,t){var e=t.page;return"/api/v3/collections/".concat(n,"/media?page=").concat(e,"&per_page=12")})},17700:function(n,t,e){e.d(t,{Y:function(){return v}});var r=e(5338),i=e(23810),o=e(6939),a=e(30073),c=e.n(a),u=e(18529),l=e(74162),s=e(39010),f=e(75976),p=e(86126);function v(n,t,e,a){var v,d=(0,l.kY)().cache,g=(0,u.useRef)(void 0),y=(0,u.useMemo)(function(){var r=(null!==(f=n.pagination)&&void 0!==f?f:{}).initPageState,o=(0,p.o)(n,e,a,t,d,!0,{parallel:!0,revalidateFirstPage:!1,revalidateAll:!1}),c=(0,i.Z)(o,3),u=c[0],l=c[1],s=c[2];if(r){var f,v,y=null!==(v=null==t?void 0:t.pagination)&&void 0!==v?v:null;g.current=r(y,s)}return{initialUrl:l,swrOpts:u}},[]),b=(0,u.useState)(function(){var e;return t?null===(e=n.meta)||void 0===e?void 0:e.call(n,t):void 0}),h=b[0],m=b[1],O=(0,u.useCallback)(function(t){var r,i,o,c=null!==(r=null===(i=n.pagination)||void 0===i?void 0:i.getPageState(g.current,t))&&void 0!==r?r:null===(o=n.pagination)||void 0===o?void 0:o.initial;return(null==a?void 0:a.enabled)===!1?null:(0,f.Qd)(n,e,c,t)},[n,e,null==a?void 0:a.enabled]),P=(0,u.useCallback)((v=(0,r.Z)(c().mark(function t(e){var r,o,a,u,l;return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=(0,i.Z)(e,5)[4],t.next=3,n.queryFn(e,"response");case 3:return a=t.sent,u=(0,p.y)(n.select,a),a&&null!==(r=n.pagination)&&void 0!==r&&r.updateState&&void 0!==(l=n.pagination.updateState(a.pagination,g.current,o))&&(g.current=l),n.meta&&a&&m(function(t){var e,r;return null!==(e=null===(r=n.meta)||void 0===r?void 0:r.call(n,a))&&void 0!==e?e:t}),t.abrupt("return",u);case 8:case"end":return t.stop()}},t)})),function(n){return v.apply(this,arguments)}),[n]),j=(0,s.ZP)(O,P,y.swrOpts),w=j.data,k=j.isLoading,S=j.isValidating,E=j.size,Z=j.mutate,x=j.setSize,N=(0,u.useMemo)(function(){var n;return null!==(n=null==w?void 0:w.reduce(function(n,t){return n.push.apply(n,(0,o.Z)(t)),n},[]))&&void 0!==n?n:[]},[w]);return(0,u.useMemo)(function(){var t,e,i,o;return{data:N,meta:h,isLoading:k,isFetching:k||S,queryKey:y.initialUrl,hasNextPage:null!==(t=null===(e=n.pagination)||void 0===e?void 0:e.hasNextPage(g.current,E))&&void 0!==t&&t,getResultCount:function(){var t,e;return null!==(t=null===(e=n.pagination)||void 0===e?void 0:e.getResultCount(g.current))&&void 0!==t?t:null},refetch:(i=(0,r.Z)(c().mark(function n(){return c().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Z();case 2:return n.abrupt("return",null);case 3:case"end":return n.stop()}},n)})),function(){return i.apply(this,arguments)}),fetchNextPage:(o=(0,r.Z)(c().mark(function n(){var t;return c().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return x(t=E+1),n.abrupt("return",t);case 3:case"end":return n.stop()}},n)})),function(){return o.apply(this,arguments)})}},[N,h,k,S,y,n.pagination,Z,E,x])}},71351:function(n,t,e){e.d(t,{P:function(){return s},t:function(){return f}});var r=e(94713),i=e(23810),o=e(75893),a=e(39010),c=e(75976);function u(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),e.push.apply(e,r)}return e}function l(n,t){var e=t.matcher,l=t.mutator,s=t.options,f=t.revalidate,p=void 0!==f&&f;if(e){if("function"==typeof e)v=function(t){var r=Array.isArray(t)?t:[null];return(0,i.Z)(r,1)[0]===n.tag&&e(t)};else{var v,d,g,y=Array.isArray(e)?e:[e,null!==(d=null===(g=n.pagination)||void 0===g?void 0:g.initial)&&void 0!==d?d:void 0],b=(0,i.Z)(y,2),h=b[0],m=b[1];if(n.tag.startsWith("api-")){var O=(0,c.Qd)(n,h,m);v=function(n){return Array.isArray(n)&&O.every(function(t,e){return n[e]===t})}}else{var P=(0,c.Qd)(n,h,m,0).slice(0,-1);v=function(n){return Array.isArray(n)&&P.every(function(t,e){return n[e]===t})}}}}else v=function(t){var e=Array.isArray(t)?t:[null];return(0,i.Z)(e,1)[0]===n.tag};var j=function(t){if(void 0===t)return t;if("function"==typeof l){var e=n.wrap(t),r=e!==t,i=l(e);return i&&r?n.select(i):i}return l?l:p?t:void 0},w=function(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?u(Object(e),!0).forEach(function(t){(0,r.Z)(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):u(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}({revalidate:p},s);n.tag.startsWith("paginated-")?(function(n,t,e){var r=[],i=[],c=(0,o.JG)(function(t){return!!n(t)&&(r.push(t),!0)},function(n){var e=t(n);return i.push(e),e},e);if(r.length&&i.length===r.length&&i.every(function(n){return void 0!==n})){var u=r.reduce(function(n,t){return n[4]<t[4]?n:t}),l=(0,a.wE)(function(){return u});return Promise.all([c,(0,o.JG)(l,function(n){return n&&i})])}return r.length&&console.warn("Unable to patch infinite key",r,i),c})(v,j,w).catch(Sentry.captureException):(0,o.JG)(v,j,w).catch(Sentry.captureException)}function s(n,t){l(n,t)}function f(n,t){l(n,null!=t?t:{})}}}]);